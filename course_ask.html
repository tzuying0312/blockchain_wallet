<!DOCTYPE HTML>
<html>
	<head>
		<title>course_ask</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="js/get_current_user.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-layers.min.js"></script>
		<script src="js/init.js"></script>
		<link rel="stylesheet" href="assets/css/main.css" />	</head>
	<body id="top">
        <header id="header" class="skel-layers-fixed">
            <nav id="nav">
            <ul>
                <li><a href="home.html">Home</a></li>
                <li><a href="reserve.html">Reserve</a></li>
                <li><a href="course.html" >課程專區</a>
                <ul>
                    <li><a href="course_share.html" >我要分享</a></li>
                    <li><a href="course.html" >快速查詢</a></li>
                    <li><a href="course_ask.html" >我要發問</a></li>
                    <li><a href="course_ask.html" >發問區</a></li>
                </ul>
                </li>
                <li><a href="wallet.html">My_wallet</a>
                <ul>
                    <li><a href="wallet.html">交易紀錄</a></li>
                    <li><a href="pay.html">GOPAY</a></li>
                </ul>
                </li>
                <li><a href="setting.html" >個人帳戶</a>
                <ul>
					<li><a href="setting.html" >個人資訊</a>
                    <li><a href="allcard.html" >Card</a></li>
                    <li><a href="index.html">Login</a></li>
                    <li><a href="index.html" id="logout_button">Logout</a></li>
                </ul>
                </li>
            </ul>
            </nav>
        </header>
		<section id="one" class="wrapper style2 special">
            <div id='ask_div'  class="inner narrow">
                
                <form class="grid-form" id='share' action="#">
                   
                        <div class="form-group">
                            <label for="message">學系或科目類別</label>
                            <select id = 'identity'>
                                <option  hidden>請選擇科目類別▾</option>
                                <option value="1111中國文學系">中國文學系</option>
                                <option value="1212歷史學系">歷史學系</option>
                                <option value="1313哲學系">哲學系</option>
                                <option value="1414政治學系">政治學系</option>
                                <option value="7070巨量資料管理學院學士學位學程">巨量資料管理學院學士學位學程</option>
                                                                                                                                                                                                                     
                            </select>
                        </div>
                        <br>
                        <div class="form-group" >
                            <label for="message">年級</label>
                            <select id ='academy'>
                                <option  hidden>請選擇年級▾</option>
                                <option>大一</option>
                                <option>大二</option>
                                <option>大三</option>
                                <option>大四</option>
                                <option>大五</option>
                                <option>其他</option>
                            </select>
                        </div>
                        <br>
                       
                        <div class="form-control narrow">
                            <label for="name">課程名稱</label>
                            <input name="name" id="name" type="text">
                        </div>
                        <div class="form-control narrow">
                            <label >老師名字</label>
                            <input name="email" id="email" type="email">
                        </div>
                        <div class="form-control">
                            <label>詢問內容 課程需求及注意事項 老師上課風格</label>
                            <textarea name="message" id="message" rows="3"></textarea>
                        </div>

                        <ul class="actions">
                            <li><input value="Send Message" type="submit"></li>
                        </ul>
                </form>
            </div>

        </section>
		<script>
			var name = sessionStorage.getItem("key");
			if (name == 'null'){
				alert("請先登入");
				window.location.href="index.html";	
			}

			$(document).ready(function(){
				$('#send_share').click(function(){
					var name = sessionStorage.getItem("key");
					var course_name_val = document.getElementById("course_name").value;
					var course_teacher_val = document.getElementById("course_teacher").value;
					var course_message_val = document.getElementById("course_message").value;
					var i = document.getElementById("department");
					var department_val = i.options[i.selectedIndex].value;
					var g = document.getElementById("grade");
					var grade_val = g.options[g.selectedIndex].value;
					console.log(course_name_val,course_teacher_val)

					$.ajax({
						type:'post',
						url: "http://localhost:1993/course_share",
						dataType: "json",
						data:{ write_user:name ,course_name: course_name_val, course_teacher: course_teacher_val, course_message:course_message_val, department:department_val, grade:grade_val},
						success: function(data){
							console.log(data)
							alert('you success')
							document.getElementById("course_name").value = ''
							document.getElementById("course_teacher").value = ''
						},
						error: function (error) {
							alert('faile')
							console.log('failed')
						}
						
					})
				});
			});
		</script>
		<script>
			$(document).ready(function(){
				$('#logout_button').click(function(){
				console.log('remove')
				sessionStorage.removeItem("key");
				});
			});
		</script>
	</body>
	<style>
		#nav li {
			display: block;
			float: left;
		}
		#nav li:hover {
			cursor: pointer;
		}

		#nav ul li ul {
			visibility: hidden;
			display: none;
			opacity: 0;
		}
		#nav a:hover {
              /* 滑鼠滑入按鈕變色*/
              background-color: #e9f1f1;
              color: #fff;
            }
		#nav ul li:hover > ul,
		#nav ul li ul:hover {
			visibility: visible;
			opacity: 1;
			display: block;
		}

		#nav ul li ul li {
			clear: both;
			width: 100%;
		}
	</style>
</html>
		